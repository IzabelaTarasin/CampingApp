@page "/reservations"
@using CampingApp.Domain;
@using System.IO
@using CampingApp.Services;
@inject IJSRuntime JS
@inject IReservationService ReservationService;

<PageTitle>@title</PageTitle>

<div class="text-center">
    <div class="mainText">
        <h1 class="display-4 text-capitalize text-black">Zarządzaj rezerwacjami</h1>
    </div>
    <div class="container">
        <div>
            @foreach (var reservationModel in reservationsModel)
            {
                <div class="col-4 mb-5">
                    <br />
                    <p class="nameText">Numer rezerwacji @reservationModel.Id</p>
                    <p class="smallTextOwn">Termin pobytu: </p>
                    <p class="smallTextOwn">od @reservationModel.StartDate do @reservationModel.EndDate</p>
                    <button class="btn btn-primary mt-1" type="submit">Pobierz potwierdzenie rezerwacji</button>
                    <button class="btn btn-primary mt-1" type="submit">Anuluj rezerwację</button>

                </div>
            }
        </div>
    </div>
</div>

@code {
    private string title = "CampApp";

    private List<ReservationModel> reservationsModel;

    [Parameter]
    public int ReservationId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            reservationsModel = await ReservationService.GetMyReservation();
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error: " + ex);
        }
    }

    @*private async Task DownloadFileFromURL()
        {
            var fileURL = $"https://localhost:7026/reservation/{Reservation.Id}/pdf";
            var fileName = "{confirm}";
            await JS.InvokeVoidAsync("triggerFileDownload", fileName, fileURL);
        }*@

}
